<!DOCTYPE html>
<html>
<head>
<title>Spring Core 3.2 - Certification Study Notes</title>

<link href="gcp/prettify.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="gcp/run_prettify.js"></script>

<link href="favicon.ico"  rel="icon" type="image/x-icon" />

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="keywords" content="spring certification, spring, certification, springsource, core, study guide, notes, question, exam">
<meta name="description" content="Core Spring Professional Certification Study Notes / Guides, Resources, Mock Exams">
<meta name="author" content="Arnošt Havelka"> 
</head>

<body>
	<h1>Spring Core 3.2 - Study Notes © 2013 Arnošt Havelka</h1>

	<h2>Disclaimer</h2>
    <p>This artical is heavily based on artical <strong><a href="http://springcert.sourceforge.net/">Core Spring Professional Certification Study Guides, Resources, Mock Exams</a> by Gavin Lasnitzki</strong> (and of course <strong><a href="http://www.selikoff.net/2010/08/20/jeannes-core-spring-3-certification-experiences/">jeanne’s core spring 3 certification experiences</a> by Jeanne Boyarsky</strong>). My notes is just an extenstion (in some areas) and update to spring framework 3.2.x.</p>
    <p>I have <strong>copied / reposted </strong> them, changed the formatting and added where I thought appropriate.</p>
	
	<h2>SpringSource Certification</h2>
	<p>Breakdown of <a href="http://mylearn.vmware.com/mgrReg/plan.cfm?plan=31110&ui=www_cert">certification</a> exam (scope) defined in <a href="http://mylearn.vmware.com/courseware/152239/core-spring-3.0-certification-study-guide.pdf">study guide</a> is:
		<ul>
			<li>Container and test</li>
			<li>AOP</li>
			<li>JDBC</li>
			<li>Transactions</li>
			<li>Web</li>
			<li>REST</li>
			<li>Remoting</li>
			<li>Security</li>
			<li>JMS</li>
			<li>JMX</li>
		</ul>
	</p>

	<h2>Spring Reference Docs 3.2.x</h2>
	<ul>
		<li> Reference Manual ( <a target="_core3" href="http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html">HTML</a> / <a target="_core3" href="http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/pdf/spring-framework-reference.pdf">PDF</a> ) </li>
		<li> <a target="_core3" href="http://static.springsource.org/spring/docs/3.2.x/javadoc-api/">API</a> (Javadoc) </li>
		<li> <a target="_core3" href="http://static.springsource.org/spring/docs/3.2.x/changelog.txt">Change Log</a></li>
	</ul>

	<h2>Spring Framewwork 3.2 - Certification Study Notes</div></h2>
    <h3>1. Container</h3>
    <h4>1.1 General</h4>
    <h4>1.1.1 The potential advantages of using Spring's dependency injection?</h4>
	<ul><strong>Pros:</strong>
		<li>Loosely coupled code</li>
		<li>Autowire</li>
		<li>Dependency checking</li>
	</ul>
    <h4>1.1.2 Dependency injection in XML, using constructor or setter injection</h4>
	<font color='blue' size="4">Constructor</font>
    <p><strong>&lt;constructor-arg/&gt;</strong> -  Only works if there is no ambiguity in args</p>
    <p>Use the following attributes to reduce ambiguity:</p>
    <ul>
		<li>
			&quot;type&quot; matching by specifying argument type
<pre class="prettyprint"><code class="language-xml">&lt;bean id="exampleBean" class="examples.ExampleBean"&gt;
	&lt;constructor-arg type="int"&gt;&lt;value&gt;7500000&lt;/value&gt;&lt;/constructor-arg&gt;
	&lt;constructor-arg type="java.lang.String">&lt;value>abc&lt;/value&gt;&lt;/constructor-arg&gt;
&lt;/bean&gt;
</code></pre>
		</li>
		<li>
			&quot;index&quot; by specifying position (zero  based)
<pre class="prettyprint"><code class="language-xml">&lt;bean id="exampleBean" class="examples.ExampleBean"&gt;
	&lt;constructor-arg index="0"&gt;&lt;value&gt;7500000&lt;/value&gt;&lt;/constructor-arg&gt;
	&lt;constructor-arg index="1">&lt;value>abc&lt;/value&gt;&lt;/constructor-arg&gt;
&lt;/bean&gt;
</code></pre>
		</li>
	</ul>
	<p><strong>C namespace</strong> -  similar to P namespace</p>
<pre class="prettyprint"><code class="language-xml">&lt;beans ...  xmlns:c="http://www.springframework.org/schema/c"&gt;
-- by name
&lt;bean id="foo" class="x.y.Foo" c:bar-ref="bar" c:baz-ref="baz" c:email="foo@bar.com"&gt;
-- by index
&lt;bean id="foo" class="x.y.Foo" c:_0-ref="bar" c:_1-ref="baz"&gt;
</code></pre>

	<font color='blue' size="4">Setter</font>
	<p><strong>&lt;property/&gt;</strong></p>
<pre class="prettyprint"><code class="language-xml">&lt;bean id="exampleBean" class="examples.ExampleBean"&gt;
	&lt;property name="value" value="my value"/&gt; -- literal value
	&lt;property name="service" ref="myService"/&gt; -- refence to other bean
&lt;/bean&gt;
</code></pre>
	<p><strong>P namespace</strong></p>
<pre class="prettyprint"><code class="language-xml">&lt;beans ...  xmlns:p="http://www.springframework.org/schema/p"&gt;
-- by name
&lt;bean id="foo" class="x.y.Foo" p:value="my value" c:service-ref="myService"&gt;
-- by index
&lt;bean id="foo" class="x.y.Foo" c:_0="my value" c:_1-ref="myService"&gt;
</code></pre>

    <h4>1.1.3 Scopes</h4>
    <p>Supported</p>
	<ul>
		<li>Singleton (default)</li>
		<li>Prototype</li>
		<li>Web (request, session and global session)</li>
    </ul>

	<h4>1.2 Lifecycle</h4>
    <h4>1.2.1 How to declare an initialization method in a Spring bean?</h4>
	<ul>
		<li>XML: &lt;bean ... <strong>init-method</strong>="init"&gt;</li>
		<li>JSR-250: <strong>@PostConstruct</strong></li>
		<li>Implement <strong>BeanPostProcessors#xyzProcessBeforeInitialization</strong></li>
		<li>Implement <strong>InitializingBean</strong></li>
	</ul>
    <h4>1.2.2 How to declare a destroy method in a Spring bean?</h4>
	<ul>
		<li>XML: &lt;bean ... <strong>destroy-method</strong>="finish"&gt;</li>
		<li>JSR-250: <strong>@PreDestroy</strong></li>
		<li>Implement <strong>DisposableBean</strong></li>
	</ul>
    <h4>1.2.3 Default bean instantiation policy: when are beans instantiated?</h4>
    <p>For Singleton, when app context is created / parsed</p>
    <p>To specify instantiation policy</p>
	<ul>
		<li>Use &quot;lazy-init&quot; on the  &quot;bean&quot; element</li>
		<li>Use the &quot;default-lazy-init&quot; on the  &quot;beans&quot; element</li>
	</ul>
    <p><font color='blue' size="4">Lifecycle:</font>
	<svg style="width:400px; height:350px;">
		<text x="80" y="20">Definition of application context</text>
		<line x1="180" y1="35" x2="180" y2="80" stroke="#000000" stroke-width="2"/>
		<line x1="170" y1="70" x2="180" y2="80" stroke="#000000" stroke-width="2"/>
		<line x1="190" y1="70" x2="180" y2="80" stroke="#000000" stroke-width="2"/>
		<text x="190" y="65" fill="blue">1</text>
		
		<text x="0" y="130">BFPP</text>
		<line x1="20" y1="110" x2="100" y2="110" stroke="#000000" stroke-width="2"/>
		<line x1="90" y1="100" x2="100" y2="110" stroke="#000000" stroke-width="2"/>
		<line x1="90" y1="120" x2="100" y2="110" stroke="#000000" stroke-width="2"/>
		<text x="40" y="105" fill="blue">2 + 3</text>
					
		<rect x="100" y="80" width="150" height="60" stroke="#000000"	stroke-width="4" fill="#AAAAFF" />
		<text x="120" y="120">Bean Definition</text>
		
		<line x1="180" y1="140" x2="180" y2="180" stroke="#000000" stroke-width="2"/>
		<line x1="170" y1="170" x2="180" y2="180" stroke="#000000" stroke-width="2"/>
		<line x1="190" y1="170" x2="180" y2="180" stroke="#000000" stroke-width="2"/>
		<text x="190" y="165" fill="blue">4 + 5</text>
		
		<text x="0" y="230">BPP</text>
		<line x1="20" y1="210" x2="100" y2="210" stroke="#000000" stroke-width="2"/>
		<line x1="90" y1="200" x2="100" y2="210" stroke="#000000" stroke-width="2"/>
		<line x1="90" y1="220" x2="100" y2="210" stroke="#000000" stroke-width="2"/>
		<text x="40" y="205" fill="blue">7 + 10</text>

		<rect x="100" y="180" width="150" height="60" stroke="#000000"	stroke-width="4" fill="#AAAAFF" />
		<text x="140" y="220">Instance</text>
		
		<line x1="180" y1="240" x2="180" y2="290" stroke="#000000" stroke-width="2"/>
		<line x1="170" y1="280" x2="180" y2="290" stroke="#000000" stroke-width="2"/>
		<line x1="190" y1="280" x2="180" y2="290" stroke="#000000" stroke-width="2"/>
		<text x="190" y="275" fill="blue">5</text>
		
		<text x="160" y="310">Ready</text>
	</svg>
	<ol><strong>Init:</strong>
		<li>Load all  bean definitions to create an ordered graph (the  container tries to set properties and resolve dependencies as late as possible)</li>
		<li>Instantiate bean definition</li>
		<li>Instantiate each bean</li>
		<li>Set properties</li>
		<li>BeanPostProcessors (#postProcessBeforeInitialization)</li>
		<li>@PostConstruct</li>
		<li>InitializingBean (#afterPropertiesSet)</li>
		<li>Call init-method</li>
		<li>BeanPostProcessors (#postProcessAfterInitialization)</li>
	</ol>
	<ol><strong>Destroy:</strong>
		<li>@PreDestroy</li>
		<li>DisposableBean (#destroy)</li>
		<li>Call destroy-method</li>
	</ol>
	<p><font color='blue' size="4">Mem:</font>
	<ul>
		<li>Order (by component): XML: context, BFPP, new, set, BPP#before,  init[@PostConstruct, Init#after, init-method], BPP#after, dispose[@PreDestroy,  Disp#destroy, destroy-method]</li>
		<li>Sequence (by type): init / destroy order is: (@) annotation, (#)  interface method, (-) xml attribute</strong></li>
	</ul>
	<font color='blue' size="4">What are BeanFactoryPostProcessors and BeanPostProcessors? When are  they called in the startup process?</font>
	<ul><strong>BeanFactoryPostProcessors</strong>
		<li>Each processor is called once per xml (i.e per  application context)</li>
		<li>Before beans are instantiated</li>
		<li>Can change bean configuration / definitions</li>
		<li>If BeanFactoryPostProcessors are marked as being  lazily-initialized they will NOT be instantiated and will NOT apply their logic.</li>
	</ul>
	<ul><strong>BeanPostProcessors</strong>
		<li>Each processor is called once per bean</li>
		<li>Can run before / after a bean is initialised </li>
	</ul>
	<h4><font color='brown'>1.x What is a BeanFactory?</font></h4>
	<p>Underlying basis for Spring's IoC functionality</p>	

	<h4>1.3 Annotations</h4>
	<h4>1.3.1 Enabling component-scanning</h4>
	<ul><strong>&lt;context:component-scan /&gt;</strong>
		<li>Looks for @Component (general), @Controller (web),  @Repository (dao) and @Service (service)</li>
		<li>Can set context:include-filter and context:exclude-filter  elements</li>
	</ul>
	<p>Example:</p>
<pre class="prettyprint"><code class="language-xml">&lt;context:component-scan  base-package="org.example"&gt;
    &lt;context:include-filter type="regex"  expression=".*Stub.*Repository"/&gt;
    &lt;context:exclude-filter type="annotation"  expression="org.springframework.stereotype.Repository"/&gt;
&lt;/context:component-scan>
</code></pre>
	<h4>1.3.2 Behavior of the annotation @Autowired with regards to field  injection, constructor injection and method injection</h4>
	<ul>Modes:
		<li><strong>no</strong>: (default) No auto-wiring will be performed.  You must wire the dependencies explicitly.</li>
		<li>byName: For each bean property, wire a bean with  the same name as the property.</li>
		<li>byType: For each bean property, wire a bean  whose type is compatible with that of the property.</li>
		<li>constructor: If a default constructor with no  argument is found, the dependencies will be auto-wired by type. Otherwise, they  will be auto-wired by constructor.</li>
	</ul>
	<p>If &gt; 1 match, throws exception (unless injecting into  Collection). <br>
		If no matches, autowiring fails unless using @Required or  &quot;required&quot; attribute</p>
	<p>May be applied to: </p>
	<ul>
		<li>setter methods</li>
		<li>methods with arbitrary names and/or multiple  arguments</li>
		<li>constructors</li>
		<li>fields (even private ones)</li>
		<li>arrays (whereby all beans of a particular type  from the ApplicationContext are injected)</li>
		<li>typed collections</li>
		<li>typed maps (as long as the key is a  java.lang.String )</li>
	</ul>
	<h4>1.3.3 How does the @Qualifier annotation complement the use of @Autowired?</h4>
	<ul>
		<li><strong>@Qualifier(name)</strong> - specifies specific bean name if desired (e.g. to choose one of many beans of same type)</li>
		<li>the bean name is considered as a default qualifier value (when no quilifier is defined)</li>
	</ul>
	<h4>1.3.4 What is the role of the @PostConstruct and @PreDestroy annotations?</h4>
	<p>Similar to init-method and destroy-method </p>
	<h4>1.3.5 Enabling the scanning of annotations such as @Required and  @PreDestroy?</h4>
	<p>Use <strong>&lt;context:annotation-config /&gt;</strong> for (Spring's @Required and @Autowired, JSR  250's @PostConstruct, @PreDestroy and @Resource, PA's @PersistenceContext and  @PersistenceUnit) </p>
	<ul>
		<li>&lt;context:component-scan /&gt; can also do what &lt;context:annotation-config /&gt; does but &lt;context:component-scan /&gt; also scans packages to find and register beans within the application context.</li>
		<li>@Required goes on setters, not fields</li>
		<li>@PostConstruct, @PreDestroy goes on methods</li>
	</ul>
	<h4><font color='brown'>1.3.x6 Scheduled tasks</font></h4>
	<ul>
		<li>@Scheduled(fixedDelay=5000)</li>
		<li>@Async</li>
	</ul>
	<h4><font color='brown'>1.3.x7 SpEL</font></h4>
	<ul>
		<li>Code: (new  SpelExpressionParser()).parseExpression(&quot;numberGuess.randomNumber&quot;).getValue(target)</li>
		<li>Xml: value=&quot;#{numberGuess.randomNumber}&quot;/&gt;</li>
		<li>Annotation:  @Value(&quot;#{numberGuess.randomNumber}&quot;)</li>
	</ul>
	
</body>
</html> 